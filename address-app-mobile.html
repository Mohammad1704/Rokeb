<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1A5F7A">
    <title>AddressBook Mobile</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* Mobile-First Design System CSS */
        :root {
            /* Primary Colors */
            --deep-blue: #1A5F7A;
            --teal: #57C5B6;
            --light-mint: #DDF2FD;
            --warm-gray: #F5F5F5;
            
            /* Functional Colors */
            --success-green: #27AE60;
            --warning-yellow: #F39C12;
            --error-red: #E74C3C;
            --info-blue: #3498DB;
            
            /* Text Colors */
            --text-dark: #2D3436;
            --text-medium: #636E72;
            --text-light: #B2BEC3;
            
            /* Font Sizes - Mobile Optimized */
            --display: 26px;
            --heading-1: 22px;
            --heading-2: 18px;
            --heading-3: 16px;
            --body: 14px;
            --small: 12px;
            --caption: 10px;
            
            /* Spacing - Mobile Optimized */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 24px;
            --spacing-xxl: 32px;
            
            /* Border Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            
            /* Safe Areas */
            --safe-area-inset-top: env(safe-area-inset-top, 0px);
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
            
            /* Animations */
            --transition-fast: 150ms ease;
            --transition-normal: 250ms ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            color: var(--text-dark);
            line-height: 1.5;
            background-color: var(--warm-gray);
            padding: 0;
            margin: 0;
            overflow-x: hidden;
            width: 100%;
        }
        
        /* App Shell */
        #app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            width: 100%;
            position: relative;
        }
        
        /* Header Styles */
        .app-header {
            background-color: var(--deep-blue);
            color: white;
            padding: calc(var(--spacing-md) + var(--safe-area-inset-top)) var(--spacing-md) var(--spacing-md);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .app-title {
            font-size: var(--heading-2);
            font-weight: 700;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            background-color: white;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding: var(--spacing-sm) 0 calc(var(--spacing-sm) + var(--safe-area-inset-bottom));
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 100;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--spacing-sm);
            color: var(--text-medium);
            text-decoration: none;
            font-size: var(--small);
        }
        
        .nav-item.active {
            color: var(--deep-blue);
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        /* Main Content Area */
        .app-content {
            flex: 1;
            padding: var(--spacing-md);
            padding-bottom: calc(60px + var(--spacing-xl) + var(--safe-area-inset-bottom)); /* Space for bottom nav */
        }
        
        /* Page Title */
        .page-title {
            font-size: var(--heading-1);
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            color: var(--deep-blue);
        }
        
        /* Cards */
        .card {
            background-color: white;
            border-radius: var(--radius-md);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: var(--spacing-md);
            overflow: hidden;
            transition: transform var(--transition-normal);
        }
        
        .card:active {
            transform: scale(0.98);
        }
        
        /* Address Card */
        .address-card {
            padding: var(--spacing-md);
        }
        
        .address-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }
        
        .address-name {
            font-size: var(--heading-3);
            font-weight: 700;
            color: var(--deep-blue);
        }
        
        .address-actions {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .action-icon {
            color: var(--text-medium);
            font-size: 18px;
            padding: var(--spacing-xs);
        }
        
        .address-details {
            font-size: var(--body);
            line-height: 1.4;
        }
        
        .address-line {
            margin-bottom: 2px;
        }
        
        .instructions-badge {
            display: inline-block;
            background-color: var(--light-mint);
            color: var(--deep-blue);
            font-size: var(--caption);
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            margin-top: var(--spacing-sm);
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            font-weight: 600;
            border: none;
            border-radius: var(--radius-md);
            padding: var(--spacing-md) var(--spacing-lg);
            font-size: var(--body);
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            width: 100%;
        }
        
        .btn-primary {
            background-color: var(--deep-blue);
            color: white;
        }
        
        .btn-secondary {
            background-color: white;
            color: var(--deep-blue);
            border: 1px solid var(--deep-blue);
        }
        
        .btn-icon {
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-float {
            position: fixed;
            bottom: calc(70px + var(--safe-area-inset-bottom));
            right: var(--spacing-lg);
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: var(--teal);
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 90;
            font-size: 24px;
        }
        
        /* Full-screen Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: white;
            z-index: 1000;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .modal.show {
            transform: translateY(0);
        }
        
        .modal-header {
            background-color: var(--deep-blue);
            color: white;
            padding: calc(var(--spacing-md) + var(--safe-area-inset-top)) var(--spacing-md) var(--spacing-md);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .modal-title {
            font-size: var(--heading-2);
            font-weight: 600;
        }
        
        .modal-content {
            flex: 1;
            padding: var(--spacing-md);
            padding-bottom: calc(var(--spacing-xxl) + var(--safe-area-inset-bottom));
        }
        
        /* Address Details Section */
        .detail-section {
            background-color: white;
            border-radius: var(--radius-md);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: var(--spacing-md);
            overflow: hidden;
        }
        
        .section-header {
            background-color: var(--teal);
            color: white;
            padding: var(--spacing-md);
            font-size: var(--heading-3);
            font-weight: 600;
        }
        
        .section-content {
            padding: var(--spacing-md);
        }
        
        .detail-title {
            font-size: var(--heading-2);
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
        }
        
        .detail-subtitle {
            font-size: var(--body);
            color: var(--text-medium);
            margin-bottom: var(--spacing-md);
        }
        
        /* Instruction Steps */
        .step-item {
            margin-bottom: var(--spacing-md);
        }
        
        .step-header {
            background-color: var(--deep-blue);
            color: white;
            padding: var(--spacing-sm) var(--spacing-md);
            border-top-left-radius: var(--radius-md);
            border-top-right-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .step-number {
            background-color: white;
            color: var(--deep-blue);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: var(--small);
        }
        
        .step-image {
            width: 100%;
            display: block;
            background-color: var(--warm-gray);
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-medium);
        }
        
        /* Loading Animation */
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        .loading-skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: var(--radius-md);
        }
        
        /* Alert */
        .alert {
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }
        
        .alert-success {
            background-color: rgba(39, 174, 96, 0.1);
            color: var(--success-green);
        }
        
        /* Action Sheet */
        .action-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            border-top-left-radius: var(--radius-lg);
            border-top-right-radius: var(--radius-lg);
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 1100;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding-bottom: var(--safe-area-inset-bottom);
        }
        
        .action-sheet.show {
            transform: translateY(0);
        }
        
        .action-sheet-header {
            text-align: center;
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--warm-gray);
        }
        
        .action-sheet-title {
            font-size: var(--heading-3);
            font-weight: 600;
        }
        
        .action-item {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--warm-gray);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }
        
        .action-item:active {
            background-color: var(--warm-gray);
        }
        
        .action-cancel {
            padding: var(--spacing-md);
            text-align: center;
            color: var(--error-red);
            font-weight: 600;
        }
        
        /* Backdrop */
        .backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 1050;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        
        .backdrop.show {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>
<body>
    <!-- Mobile App Shell Structure -->
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="app-title">AddressBook</div>
            <button class="btn-icon" onclick="toggleSearch()">
                <i class="fas fa-search"></i>
            </button>
        </header>
        
        <!-- Main Content -->
        <main class="app-content">
            <h1 class="page-title">Your Addresses</h1>
            
            <!-- Success Alert (Example) -->
            <div class="alert alert-success">
                <i class="fas fa-check-circle"></i>
                <div>Address saved successfully!</div>
            </div>
            
            <!-- Address Cards List -->
            <div id="address-list">
                <!-- Loading skeleton will be replaced with addresses -->
                <div class="card loading-skeleton" style="height: 150px;"></div>
                <div class="card loading-skeleton" style="height: 180px;"></div>
                <div class="card loading-skeleton" style="height: 150px;"></div>
            </div>
        </main>
        
        <!-- Floating Action Button -->
        <button class="btn-float" id="add-address-btn" onclick="showAddAddressScreen()">
            <i class="fas fa-plus"></i>
        </button>
        
        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="#" class="nav-item active">
                <i class="fas fa-home nav-icon"></i>
                <span>Home</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-map-marker-alt nav-icon"></i>
                <span>Addresses</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-history nav-icon"></i>
                <span>Recent</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-user nav-icon"></i>
                <span>Profile</span>
            </a>
        </nav>
        
        <!-- Address Detail Modal -->
        <div id="address-detail-modal" class="modal">
            <header class="modal-header">
                <div class="modal-title">Address Details</div>
                <button class="btn-icon" onclick="closeAddressDetail()">
                    <i class="fas fa-times"></i>
                </button>
            </header>
            <div class="modal-content">
                <!-- Location Section -->
                <div class="detail-section">
                    <div class="section-header">Location</div>
                    <div class="section-content">
                        <div id="detail-address" class="detail-title">123 Main Street, Apt 4B</div>
                        <div id="detail-city-state" class="detail-subtitle">New York, NY 10001</div>
                        <div id="detail-country" class="detail-subtitle">United States</div>
                        
                        <button class="btn btn-secondary">
                            <i class="fas fa-map-marked-alt"></i>
                            Open in Maps
                        </button>
                    </div>
                </div>
                
                <!-- Contact Section -->
                <div class="detail-section">
                    <div class="section-header">Contact</div>
                    <div class="section-content">
                        <div id="detail-name" class="detail-title">John Smith</div>
                        <div class="address-actions" style="display: flex; justify-content: space-between; align-items: center;">
                            <div id="detail-phone" class="detail-subtitle" style="margin-bottom: 0;">(212) 555-1234</div>
                            <button class="btn-icon" style="background-color: var(--light-mint); color: var(--deep-blue);">
                                <i class="fas fa-phone"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Delivery Instructions -->
                <div class="detail-section" id="instructions-section">
                    <div class="section-header">Delivery Instructions</div>
                    <div class="section-content">
                        <!-- Step 1 -->
                        <div class="step-item">
                            <div class="step-header">
                                <div class="step-number">1</div>
                                <div>Go to yellow building</div>
                            </div>
                            <div class="step-image">
                                <i class="fas fa-image" style="font-size: 32px;"></i>
                            </div>
                        </div>
                        
                        <!-- Step 2 -->
                        <div class="step-item">
                            <div class="step-header">
                                <div class="step-number">2</div>
                                <div>Go to floor 2, door 9</div>
                            </div>
                            <div class="step-image" style="position: relative;">
                                <i class="fas fa-image" style="font-size: 32px;"></i>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(0,0,0,0.6); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 3 -->
                        <div class="step-item">
                            <div class="step-header">
                                <div class="step-number">3</div>
                                <div>Leave food in heating box</div>
                            </div>
                            <div class="step-image">
                                <i class="fas fa-image" style="font-size: 32px;"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div style="margin-top: var(--spacing-xl);">
                    <button class="btn btn-primary" style="margin-bottom: var(--spacing-md);">
                        Mark Delivery Complete
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Action Sheet -->
        <div id="address-actions-sheet" class="action-sheet">
            <div class="action-sheet-header">
                <div class="action-sheet-title">Address Options</div>
            </div>
            <div class="action-item" onclick="showAddressDetail()">
                <i class="fas fa-eye" style="color: var(--deep-blue);"></i>
                <div>View Details</div>
            </div>
            <div class="action-item" onclick="showShareOptions()">
                <i class="fas fa-share-alt" style="color: var(--teal);"></i>
                <div>Share Address</div>
            </div>
            <div class="action-item" onclick="editAddress()">
                <i class="fas fa-edit" style="color: var(--info-blue);"></i>
                <div>Edit Address</div>
            </div>
            <div class="action-item" onclick="deleteAddress()">
                <i class="fas fa-trash" style="color: var(--error-red);"></i>
                <div>Delete Address</div>
            </div>
            <div class="action-cancel" onclick="closeActionSheet()">
                Cancel
            </div>
        </div>
        
        <!-- Backdrop -->
        <div id="backdrop" class="backdrop" onclick="closeAllOverlays()"></div>
    </div>
    
    <!-- Share Modal -->
    <div id="share-modal" class="modal">
        <header class="modal-header">
            <div class="modal-title">Share Address</div>
            <button class="btn-icon" onclick="closeShareModal()">
                <i class="fas fa-times"></i>
            </button>
        </header>
        <div class="modal-content">
            <div id="qr-code-container" style="background-color: var(--warm-gray); padding: var(--spacing-lg); border-radius: var(--radius-md); display: flex; justify-content: center; flex-direction: column; align-items: center; margin-bottom: var(--spacing-lg);">
                <!-- QR Code will be generated here -->
                <div style="width: 200px; height: 200px; display: flex; align-items: center; justify-content: center; background-color: white;">
                    <i class="fas fa-qrcode" style="font-size: 48px; color: var(--text-light);"></i>
                </div>
            </div>
            
            <!-- Download button for QR code -->
            <button onclick="downloadQRCode()" class="btn btn-secondary" style="margin-bottom: var(--spacing-lg);">
                <i class="fas fa-download"></i>
                Download QR Code
            </button>
            
            <div class="form-group">
                <label class="form-label">Share Link</label>
                <div style="display: flex; gap: 8px; margin-bottom: var(--spacing-lg);">
                    <input id="share-link" type="text" class="form-input" value="https://addressapp.com/share/abc123" readonly style="flex-grow: 1; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md);">
                    <button class="btn-icon" onclick="copyShareLink()" style="width: 42px; height: 42px; background-color: var(--teal); color: white;">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
            
            <div>
                <h4 style="font-size: var(--heading-3); margin-bottom: var(--spacing-md); color: var(--deep-blue);">Share via</h4>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--spacing-sm);">
                    <!-- Social sharing buttons -->
                    <button class="btn-text" style="display: flex; flex-direction: column; align-items: center; gap: var(--spacing-xs);">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background-color: #25D366; color: white; display: flex; align-items: center; justify-content: center;">
                            <i class="fab fa-whatsapp" style="font-size: 24px;"></i>
                        </div>
                        <span style="font-size: var(--small);">WhatsApp</span>
                    </button>
                    <button class="btn-text" style="display: flex; flex-direction: column; align-items: center; gap: var(--spacing-xs);">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background-color: #1877F2; color: white; display: flex; align-items: center; justify-content: center;">
                            <i class="fab fa-facebook-f" style="font-size: 24px;"></i>
                        </div>
                        <span style="font-size: var(--small);">Facebook</span>
                    </button>
                    <button class="btn-text" style="display: flex; flex-direction: column; align-items: center; gap: var(--spacing-xs);">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background-color: #1DA1F2; color: white; display: flex; align-items: center; justify-content: center;">
                            <i class="fab fa-twitter" style="font-size: 24px;"></i>
                        </div>
                        <span style="font-size: var(--small);">Twitter</span>
                    </button>
                    <button class="btn-text" style="display: flex; flex-direction: column; align-items: center; gap: var(--spacing-xs);">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background-color: #0088cc; color: white; display: flex; align-items: center; justify-content: center;">
                            <i class="fab fa-telegram-plane" style="font-size: 24px;"></i>
                        </div>
                        <span style="font-size: var(--small);">Telegram</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Address Screen -->
    <div id="add-address-screen" class="modal">
        <header class="modal-header">
            <div class="modal-title">Add New Address</div>
            <button class="btn-icon" onclick="closeAddAddressScreen()">
                <i class="fas fa-times"></i>
            </button>
        </header>
        <div class="modal-content">
            <!-- Location Button -->
            <button id="locate-me" class="btn btn-secondary" style="margin-bottom: var(--spacing-lg); display: flex; justify-content: center; gap: var(--spacing-sm);">
                <i class="fas fa-location-arrow"></i>
                Use My Current Location
            </button>
            
            <!-- Location Status -->
            <div id="location-status" class="alert alert-info" style="margin-bottom: var(--spacing-lg); display: none;">
                <i class="fas fa-info-circle"></i>
                <div>Detecting your location...</div>
            </div>
            
            <form id="address-form">
                <div class="form-group">
                    <label class="form-label">Address Name</label>
                    <input type="text" class="form-input" placeholder="e.g. Home, Work, Mom's House" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md); margin-bottom: var(--spacing-md);">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" placeholder="Full name of recipient" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md); margin-bottom: var(--spacing-md);">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Street Address</label>
                    <input type="text" id="street-address" class="form-input" placeholder="Street address, P.O. box, company name" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md); margin-bottom: var(--spacing-md);">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Apartment, Suite, etc.</label>
                    <input type="text" class="form-input" placeholder="Apartment, suite, unit, building, floor, etc." style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md); margin-bottom: var(--spacing-md);">
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md); margin-bottom: var(--spacing-md);">
                    <div class="form-group">
                        <label class="form-label">City</label>
                        <input type="text" id="city" class="form-input" placeholder="City" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md);">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">State/Province</label>
                        <input type="text" id="state" class="form-input" placeholder="State/Province" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md);">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md); margin-bottom: var(--spacing-md);">
                    <div class="form-group">
                        <label class="form-label">ZIP/Postal Code</label>
                        <input type="text" id="zip" class="form-input" placeholder="ZIP or postal code" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md);">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Country</label>
                        <select id="country" class="form-input" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md); background-color: white;">
                            <option>United States</option>
                            <option>Canada</option>
                            <option>United Kingdom</option>
                            <option>Australia</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group" style="margin-bottom: var(--spacing-md);">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-input" placeholder="Phone number for delivery questions" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md);">
                </div>
                
                <div class="form-group" style="margin-bottom: var(--spacing-xl);">
                    <label class="form-label">Delivery Instructions (Optional)</label>
                    <div style="display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-md);">
                        <button type="button" id="simple-instructions-btn" class="btn-text" style="flex: 1; border: 1px solid var(--light-mint); background-color: white; padding: var(--spacing-sm); border-radius: var(--radius-md);">Simple Text</button>
                        <button type="button" id="step-instructions-btn" class="btn-text" style="flex: 1; border: 1px solid var(--teal); background-color: var(--light-mint); padding: var(--spacing-sm); border-radius: var(--radius-md);">Step-by-Step</button>
                    </div>
                    
                    <!-- Simple Text Instructions (hidden by default) -->
                    <div id="simple-instructions" style="display: none;">
                        <textarea class="form-input" placeholder="Special instructions for the delivery person" style="width: 100%; min-height: 100px; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md);"></textarea>
                    </div>
                    
                    <!-- Step-by-Step Instructions -->
                    <div id="step-instructions">
                        <!-- Step 1 -->
                        <div class="step-container" style="border: 1px solid var(--light-mint); border-radius: var(--radius-md); padding: var(--spacing-md); margin-bottom: var(--spacing-md);">
                            <div style="display: flex; align-items: center; margin-bottom: var(--spacing-sm);">
                                <div style="background-color: var(--deep-blue); color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: var(--spacing-sm);">1</div>
                                <div style="font-weight: 600;">Step 1</div>
                            </div>
                            <textarea class="form-input" placeholder="Example: Go to street alhlibe to the yellow building" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md); margin-bottom: var(--spacing-sm);"></textarea>
                            <div style="display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
                                <button type="button" class="btn-text" style="display: flex; align-items: center; gap: 4px; border: 1px dashed var(--text-light); padding: var(--spacing-sm); background-color: white; border-radius: var(--radius-md); flex: 1;">
                                    <i class="fas fa-image"></i>
                                    Add Image
                                </button>
                                <button type="button" class="btn-text" style="display: flex; align-items: center; gap: 4px; border: 1px dashed var(--text-light); padding: var(--spacing-sm); background-color: white; border-radius: var(--radius-md); flex: 1;">
                                    <i class="fas fa-video"></i>
                                    Add Video
                                </button>
                            </div>
                        </div>
                        
                        <!-- Add Step Button -->
                        <button type="button" id="add-step-btn" class="btn-text" style="display: flex; align-items: center; width: 100%; justify-content: center; border: 1px dashed var(--teal); padding: var(--spacing-md); margin-bottom: var(--spacing-md); border-radius: var(--radius-md);">
                            <i class="fas fa-plus-circle" style="margin-right: var(--spacing-sm); color: var(--teal);"></i>
                            Add Another Step
                        </button>
                    </div>
                </div>
                
                <div style="margin-bottom: var(--spacing-xl);">
                    <div style="display: flex; gap: 10px; align-items: center; margin-bottom: var(--spacing-md);">
                        <input type="checkbox" id="default-address" style="width: 18px; height: 18px;">
                        <label for="default-address">Set as default address</label>
                    </div>
                    
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="checkbox" id="save-info" style="width: 18px; height: 18px;">
                        <label for="save-info">Save this information for next time</label>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md); margin-bottom: var(--spacing-xl);">
                    <button type="button" onclick="closeAddAddressScreen()" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Address</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add QR Code generator script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <!-- App Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('AddressBook Mobile initialized');
            
            // Initialize event listeners
            document.getElementById('add-address-btn').addEventListener('click', showAddAddressScreen);
            
            // Simulate loading addresses (will be replaced with real implementation)
            setTimeout(function() {
                displayAddresses();
            }, 1500);
        });
        
        // Display addresses function
        function displayAddresses() {
            // Clear loading skeletons
            const addressList = document.getElementById('address-list');
            addressList.innerHTML = '';
            
            // Demo data - will be replaced with real data fetch
            const addresses = [
                {
                    id: 'home-address',
                    name: 'Home',
                    recipient: 'John Smith',
                    street: '123 Main Street, Apt 4B',
                    city: 'New York',
                    state: 'NY',
                    zip: '10001',
                    country: 'United States',
                    phone: '(212) 555-1234',
                    instructions: 'Please leave package with doorman if not home. Ring bell twice.'
                },
                {
                    id: 'work-address',
                    name: 'Work',
                    recipient: 'John Smith',
                    street: '456 Business Ave, Floor 22',
                    city: 'New York',
                    state: 'NY', 
                    zip: '10022',
                    country: 'United States',
                    phone: '(212) 555-6789'
                },
                {
                    id: 'parents-address',
                    name: 'Parents',
                    recipient: 'Robert & Mary Smith',
                    street: '789 Suburban Drive',
                    city: 'Westchester',
                    state: 'NY',
                    zip: '10583',
                    country: 'United States',
                    phone: '(914) 555-4321',
                    instructions: 'Leave packages on back porch if no one answers. Do not ring doorbell after 8pm.'
                }
            ];
            
            // Create address cards
            addresses.forEach(address => {
                const card = document.createElement('div');
                card.className = 'card address-card';
                card.setAttribute('data-id', address.id);
                
                // Format the address display
                const cityStateZip = `${address.city}, ${address.state} ${address.zip}`;
                
                card.innerHTML = `
                    <div class="address-card-header">
                        <div class="address-name">${address.name}</div>
                        <div class="address-actions">
                            <i class="fas fa-ellipsis-v action-icon" onclick="showAddressOptions('${address.id}')"></i>
                        </div>
                    </div>
                    <div class="address-details">
                        <div class="address-line">${address.recipient}</div>
                        <div class="address-line">${address.street}</div>
                        <div class="address-line">${cityStateZip}</div>
                        <div class="address-line">${address.country}</div>
                        <div class="address-line">${address.phone}</div>
                        ${address.instructions ? `<div class="instructions-badge"><i class="fas fa-info-circle"></i> Has instructions</div>` : ''}
                    </div>
                `;
                
                // Add click event to view address details
                card.addEventListener('click', function() {
                    showAddressDetail(address.id);
                });
                
                addressList.appendChild(card);
            });
        }
        
        // Toggle search function
        function toggleSearch() {
            console.log('Search toggled');
            // Implementation will be added in subsequent edits
        }
        
        // Show address detail modal
        function showAddressDetail(addressId) {
            const modal = document.getElementById('address-detail-modal');
            const backdrop = document.getElementById('backdrop');
            
            // Here you would fetch the address details based on addressId
            // and update the modal content accordingly
            
            // For demo, we'll just show the modal
            modal.classList.add('show');
            backdrop.classList.add('show');
            
            closeActionSheet(); // Close the action sheet if it's open
        }
        
        // Close address detail modal
        function closeAddressDetail() {
            const modal = document.getElementById('address-detail-modal');
            const backdrop = document.getElementById('backdrop');
            
            modal.classList.remove('show');
            backdrop.classList.remove('show');
        }
        
        // Show address options action sheet
        function showAddressOptions(addressId) {
            event.stopPropagation(); // Prevent card click
            
            const actionSheet = document.getElementById('address-actions-sheet');
            const backdrop = document.getElementById('backdrop');
            
            // Store the selected address ID for later use
            actionSheet.setAttribute('data-address-id', addressId);
            
            actionSheet.classList.add('show');
            backdrop.classList.add('show');
        }
        
        // Close action sheet
        function closeActionSheet() {
            const actionSheet = document.getElementById('address-actions-sheet');
            const backdrop = document.getElementById('backdrop');
            
            actionSheet.classList.remove('show');
            
            // Only hide backdrop if no other overlays are visible
            if (!document.getElementById('address-detail-modal').classList.contains('show')) {
                backdrop.classList.remove('show');
            }
        }
        
        // Share address function
        function showShareOptions() {
            const addressId = document.getElementById('address-actions-sheet').getAttribute('data-address-id');
            closeActionSheet();
            showShareModal(addressId);
        }
        
        // Edit address function
        function editAddress() {
            const addressId = document.getElementById('address-actions-sheet').getAttribute('data-address-id');
            closeActionSheet();
            
            console.log('Edit address:', addressId);
            // Will implement edit functionality in next edit
        }
        
        // Delete address function
        function deleteAddress() {
            const addressId = document.getElementById('address-actions-sheet').getAttribute('data-address-id');
            closeActionSheet();
            
            console.log('Delete address:', addressId);
            // Will implement delete functionality in next edit
        }
        
        // Show add address screen
        function showAddAddressScreen() {
            console.log('Show add address screen');
            // Will implement add address screen in next edit
        }
        
        // Close all overlays
        function closeAllOverlays() {
            closeAddressDetail();
            closeActionSheet();
            
            const backdrop = document.getElementById('backdrop');
            backdrop.classList.remove('show');
        }
        
        // Share Modal Functions
        function showShareModal(addressId) {
            const modal = document.getElementById('share-modal');
            const backdrop = document.getElementById('backdrop');
            
            // Generate QR Code
            const qrContainer = document.getElementById('qr-code-container');
            qrContainer.innerHTML = ''; // Clear previous content
            
            const shareUrl = `https://addressapp.com/share/${addressId}`;
            document.getElementById('share-link').value = shareUrl;
            
            // Generate QR code
            try {
                new QRCode(qrContainer, {
                    text: shareUrl,
                    width: 200,
                    height: 200,
                    colorDark: "#1A5F7A",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                });
            } catch (e) {
                console.error('QR code generation failed:', e);
                qrContainer.innerHTML = '<div style="padding: 20px; text-align: center;">QR Code generation failed</div>';
            }
            
            modal.classList.add('show');
            backdrop.classList.add('show');
        }
        
        function closeShareModal() {
            document.getElementById('share-modal').classList.remove('show');
            document.getElementById('backdrop').classList.remove('show');
        }
        
        function copyShareLink() {
            const shareLink = document.getElementById('share-link');
            shareLink.select();
            document.execCommand('copy');
            
            // Show toast notification
            showToast('Link copied to clipboard!');
        }
        
        function downloadQRCode() {
            const canvas = document.querySelector('#qr-code-container canvas');
            if (canvas) {
                const image = canvas.toDataURL("image/png");
                const link = document.createElement('a');
                link.href = image;
                link.download = `address-qr-code.png`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }
        
        // Add Address Screen Functions
        function showAddAddressScreen() {
            const modal = document.getElementById('add-address-screen');
            const backdrop = document.getElementById('backdrop');
            
            modal.classList.add('show');
            backdrop.classList.add('show');
        }
        
        function closeAddAddressScreen() {
            document.getElementById('add-address-screen').classList.remove('show');
            document.getElementById('backdrop').classList.remove('show');
        }
        
        // Geolocation functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listener for the locate me button
            document.getElementById('locate-me').addEventListener('click', function() {
                const statusEl = document.getElementById('location-status');
                statusEl.style.display = 'flex';
                statusEl.innerHTML = `
                    <i class="fas fa-spinner fa-spin"></i>
                    <div>Detecting your location...</div>
                `;
                
                // Simulate geolocation API with a timeout
                setTimeout(() => {
                    // Simulate successful location
                    document.getElementById('street-address').value = '789 Broadway';
                    document.getElementById('city').value = 'New York';
                    document.getElementById('state').value = 'NY';
                    document.getElementById('zip').value = '10003';
                    document.getElementById('country').value = 'United States';
                    
                    // Update status message
                    statusEl.className = 'alert alert-success';
                    statusEl.innerHTML = `
                        <i class="fas fa-check-circle"></i>
                        <div>Location detected successfully!</div>
                    `;
                    
                    // Hide status after 3 seconds
                    setTimeout(() => {
                        statusEl.style.display = 'none';
                    }, 3000);
                }, 2000);
            });
            
            // Instructions toggle functionality
            document.getElementById('simple-instructions-btn').addEventListener('click', function() {
                document.getElementById('simple-instructions').style.display = 'block';
                document.getElementById('step-instructions').style.display = 'none';
                
                // Update button styles
                this.style.borderColor = 'var(--teal)';
                this.style.backgroundColor = 'var(--light-mint)';
                document.getElementById('step-instructions-btn').style.borderColor = 'var(--light-mint)';
                document.getElementById('step-instructions-btn').style.backgroundColor = 'white';
            });
            
            document.getElementById('step-instructions-btn').addEventListener('click', function() {
                document.getElementById('simple-instructions').style.display = 'none';
                document.getElementById('step-instructions').style.display = 'block';
                
                // Update button styles
                this.style.borderColor = 'var(--teal)';
                this.style.backgroundColor = 'var(--light-mint)';
                document.getElementById('simple-instructions-btn').style.borderColor = 'var(--light-mint)';
                document.getElementById('simple-instructions-btn').style.backgroundColor = 'white';
            });
            
            // Add step functionality
            document.getElementById('add-step-btn').addEventListener('click', function() {
                const stepContainers = document.querySelectorAll('.step-container');
                const newStepNumber = stepContainers.length + 1;
                
                const newStep = document.createElement('div');
                newStep.className = 'step-container';
                newStep.style.cssText = 'border: 1px solid var(--light-mint); border-radius: var(--radius-md); padding: var(--spacing-md); margin-bottom: var(--spacing-md);';
                
                newStep.innerHTML = `
                    <div style="display: flex; align-items: center; margin-bottom: var(--spacing-sm);">
                        <div style="background-color: var(--deep-blue); color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: var(--spacing-sm);">${newStepNumber}</div>
                        <div style="font-weight: 600;">Step ${newStepNumber}</div>
                    </div>
                    <textarea class="form-input" placeholder="Enter instructions for this step" style="width: 100%; padding: var(--spacing-md); border: 1px solid var(--text-light); border-radius: var(--radius-md); margin-bottom: var(--spacing-sm);"></textarea>
                    <div style="display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
                        <button type="button" class="btn-text" style="display: flex; align-items: center; gap: 4px; border: 1px dashed var(--text-light); padding: var(--spacing-sm); background-color: white; border-radius: var(--radius-md); flex: 1;">
                            <i class="fas fa-image"></i>
                            Add Image
                        </button>
                        <button type="button" class="btn-text" style="display: flex; align-items: center; gap: 4px; border: 1px dashed var(--text-light); padding: var(--spacing-sm); background-color: white; border-radius: var(--radius-md); flex: 1;">
                            <i class="fas fa-video"></i>
                            Add Video
                        </button>
                    </div>
                `;
                
                // Insert before the "Add Another Step" button
                const addStepBtn = document.getElementById('add-step-btn');
                addStepBtn.parentNode.insertBefore(newStep, addStepBtn);
            });
            
            // Form submission handler
            document.getElementById('address-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Here you would collect and validate the form data
                
                // For demo, just show a success message and close the form
                closeAddAddressScreen();
                
                // Show success toast
                showToast('Address saved successfully!');
                
                // Refresh the address list (in a real app, this would add the new address)
                setTimeout(displayAddresses, 500);
            });
        });
        
        // Toast notification function
        function showToast(message) {
            // Create toast element if it doesn't exist
            let toast = document.getElementById('toast-notification');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'toast-notification';
                toast.style.cssText = `
                    position: fixed;
                    bottom: calc(70px + var(--safe-area-inset-bottom));
                    left: 50%;
                    transform: translateX(-50%);
                    background-color: rgba(0,0,0,0.8);
                    color: white;
                    padding: 12px 20px;
                    border-radius: 24px;
                    font-size: var(--body);
                    z-index: 2000;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                    opacity: 0;
                    transition: opacity 0.3s ease;
                `;
                document.body.appendChild(toast);
            }
            
            // Set message and show toast
            toast.innerHTML = `
                <i class="fas fa-check-circle"></i>
                <span>${message}</span>
            `;
            
            // Show the toast
            setTimeout(() => {
                toast.style.opacity = '1';
                
                // Hide after 3 seconds
                setTimeout(() => {
                    toast.style.opacity = '0';
                }, 3000);
            }, 100);
        }
    </script>
</body>
</html> 